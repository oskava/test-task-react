<!DOCTYPE html>
<html>

<head>
   <style>
      #map {
         height: 400px;
         width: 100%;
      }

      #legend {
         font-family: Arial, sans-serif;
         background: #fff;
         padding: 10px;
         margin: 10px;
         border: 3px solid #000;
      }
   </style>
</head>

<body>

   <div id="map"></div>
   <div id="legend">
      <h3>Legend</h3>
   </div>
   <script>

      function initMap() {

         var myLatLng = { lat: 46.391665, lng: 30.723117 };

         var mapOptions = {
            zoom: 17,
            center: myLatLng
         }

         var map = new google.maps.Map(
            document.getElementById('map'), mapOptions);

         var marker = new google.maps.Marker({
            position: myLatLng,
            map: map,
            title: 'Point of geolocation.'
         });
         marker.setMap(map);

         var iconBase =
            'http://maps.google.com/mapfiles/kml/shapes';

         var icons = {
            restaurant: {
               icon: iconBase + 'dining.png'
            },
            school: {
               icon: iconBase + 'homegardenbusiness.png'
            },
            pharmacie: {
               icon: iconBase + 'earthquake.png'
            }
          gas: {
               icon: iconBase + 'cabs.png'
            }
         };

         var features = [
            {
               position: new google.maps.LatLng(46.391409, 30.723102),
               type: 'restaurant'
            }, {
               position: new google.maps.LatLng(46.391277, 30.721361),
               type: 'restaurant'
            }, {
               position: new google.maps.LatLng(46.390956, 30.724673),
               type: 'restaurant'
            }, {
               position: new google.maps.LatLng(46.391433, 30.722759),
               type: 'restaurant'
            }, {
               position: new google.maps.LatLng(46.391244, 30.726029),
               type: 'restaurant'
            }, {
               position: new google.maps.LatLng(46.393575, 30.719764),
               type: 'school'
            }, {
               position: new google.maps.LatLng(46.389917, 30.732509),
               type: 'gas'
            }, {
               position: new google.maps.LatLng(46.389947, 30.723026),
               type: 'pharmacie'
            }, {
               position: new google.maps.LatLng(46.391421, 30.722818),
               type: 'pharmacie'
            }, {
               position: new google.maps.LatLng(46.390882, 30.725209),
               type: 'pharmacie'
            }
         ];

         for (var i = 0; i < features.length; i++) {
            var marker = new google.maps.Marker({
               position: features[i].position,
               icon: icons[features[i].type].icon,
               map: map
            });
         };

         var legend = document.getElementById('legend');
         for (var key in icons) {
            var type = icons[key];
            var name = type.name;
            var icon = type.icon;
            var div = document.createElement('div');
            div.innerHTML = '<img src="' + icon + '"> ' + name;
            legend.appendChild(div);
         }

         map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(legend);

      }
   </script>

   <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC34G-rzSaqdktpIAsrhzIippSkmS4c9ik&callback=initMap">
      </script>
</body>

</html>